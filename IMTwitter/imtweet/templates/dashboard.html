{% extends "base.html" %}
{% load staticfiles %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="p-3">
  <div class="jumbotron pt-2 pb-2" style="background-color: #f0f2f4">
    <h1 class="display-4">Welcome to your Dashboard, {{ user }}!</h1>
    <p class="lead">We tried to make functions on this site self explanatory - give it a spin!</p>
    <hr class="my-2">
    <ul>
          <i class="fas fa-comments"></i><span class="pl-1">New to IMTwitter? Create a post to say hello!</span><br>
          <i class="fas fa-paw"></i><span class="pl-1">Have a cute animal pic that needs to be shared? We're happy to have it.</span><br>
          <i class="fas fa-reply"></i><span class="pl-1">Come up with a funny (or serious) retort to a previous post? Give 'em a comment!</span><br>
          <i class="fas fa-question-circle"></i><span class="pl-1">Need help or want to know more about how this app was developed? See "About" in the menu above</span><br>
    </ul>
    <p class="lead"><em>The IMTwitter world is your oyster!</em></p>
  </div>
<p>
  <a href="{% url 'add_post' %}" class="row justify-content-center" style="text-decoration: none;"><button class="center text-white btn-lg btn-primary" style="font-size: 50px; background-color:#1F7A8C; height: 150px; width: 380px;">Create Post</button></a>
  <div class="row justify-content-center">
    <div style="width: 80%;">
      <h3>Most recent posts:</h3>
    </div>
    <div class="card p-0 m-3" style="width: 80%; background-color:#f0f2f4;">
  {% for post in posts %}
      <div class="card-body">
        {% if post.user == request.user %}
        <div class="clearfix pb-3 text-right">
          <span class="font-italic text-muted">As the poster you may:</span>
          <a href="{% url 'edit_post' pk=post.pk %}"><button class="btn btn-success ml-3 mb-2">Edit post</button></a>
          <a href="{% url 'delete_post' pk=post.pk %}"><button class="btn btn-danger ml-3 mb-2">Delete post</button></a>
        </div>
        {% endif %}
        <h5 class="card-title">Posted by <strong>{{ post.user }}</strong> <span class="font-italic small mb-2 text-muted">on {{ post.pud_date }}</span></h5>
        <p class="card-text">{{ post.post_text }}</p>
      </div>
      <div class="row justify-content-center">
        <a href="{% url 'add_comment_to_post' pk=post.pk %}"><button class="center btn btn-primary" style="background-color:#1F7A8C;">Add comment</button></a>
      </div>
      <div class="row justify-content-center">
      {% for comment in post.comment_set.all %}
        <div class="card p-0 m-3" style="width: 80%; background-color:#F8F9FA;">
          <div class="card-body">
            {% if comment.user == request.user %}
            <div class="clearfix pb-3 text-right">
              <span class="font-italic text-muted">As the poster you may:</span>
              <a href="{% url 'edit_post' pk=post.pk %}"><button class="btn btn-success ml-3 mb-2">Edit post</button></a>
              <a href="{% url 'delete_comment' pk=comment.pk %}"><button class="btn btn-danger ml-3 mb-2">Delete Comment</button></a>
            </div>
            {% endif %}
            <h5 class="card-title">Reply by <strong>{{ comment.user }}</strong> <span class="font-italic small mb-2 text-muted">on {{ comment.pub_date }}</span></h5>
            <p class="card-text">{{ comment.comment_text }}</p>
            <!-- <a href="{% url 'edit_comment' pk=comment.pk %}" class="float-right"><button class="center btn btn-primary" style="background-color:#1F7A8C;">Edit post</button></a> -->
          </div>
        </div>
      {% endfor %}

    </div>
    <hr>
  {% endfor %}
  <div class="pl-5 pr-5 pb-5 pt-0">
    <div class="p-0 .text-nowrap" style="white-space: nowrap;">
      <div class="d.inline-block w-25 float-left">
        <img class="img-fluid d.inline-block p-0" style="transform: scaleX(-1)" src="{% static "rainbow-right.png" %}" alt="raindow">
      </div>
      <div class="float-left text-center w-50 p-0" style="white-space: normal;"><br>¯\_(ツ)_/¯<br><br>End of post list - I'm going to go lie down in the sun with my friend billy.</div>
      <div class="d.inline-block w-25 p-0 float-right">
        <img class="img-fluid d.inline-block p-0" src="{% static "rainbow-right.png" %}" alt="raindow">
      </div>
    </div>
    <img class="img-fluid border border-success rounded" src="{% static "goat.jpg" %}" alt="billy the goat">
  </div>
    </div>
  </div>
{% endblock %}
</div>
